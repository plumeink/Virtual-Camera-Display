<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>摄像头预览 - OBS虚拟摄像头助手</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- 视频容器 -->
    <div id="videoContainer" class="draggable">
        <!-- 视频元素 -->
        <video id="cameraPreview" autoplay muted playsinline></video>
        
        <!-- 状态显示文本 -->
        <div id="status" class="no-drag"></div>
        
        <!-- 分辨率显示标签 -->
        <div id="resolutionDisplay" class="no-drag hidden"></div>
        
        <!-- 控制按钮区域 -->
        <div id="controls" class="no-drag">
            <button id="refreshBtn" title="刷新摄像头">🔄</button>
            <button id="closeBtn" title="关闭窗口">✕</button>
            <button id="helpBtn" title="帮助">?</button>
        </div>
        
        <!-- 设备选择器 -->
        <select id="deviceSelector" class="no-drag"></select>
        
        <!-- 分辨率选择器 -->
        <div id="resolutionSelector" class="no-drag">
            <select id="presetResolution">
                <option value="auto">自动检测分辨率</option>
                <option value="640x480">640×480</option>
                <option value="800x600">800×600</option>
                <option value="1024x768">1024×768</option>
                <option value="1280x720">1280×720 (HD)</option>
                <option value="1280x960">1280×960</option>
                <option value="1920x1080">1920×1080 (FHD)</option>
            </select>
            <div class="custom-resolution">
                <input type="number" id="customWidth" placeholder="宽" min="1">
                <span>×</span>
                <input type="number" id="customHeight" placeholder="高" min="1">
            </div>
            <button id="applyResolution">应用</button>
        </div>
    </div>

    <!-- 权限帮助弹窗 -->
    <div id="permissionHelp" class="no-drag hidden">
        <h3>摄像头访问问题</h3>
        <p>如果您无法访问摄像头，请尝试以下解决方案：</p>
        <ul>
            <li>确保OBS虚拟摄像头已启动</li>
            <li>检查系统摄像头权限设置</li>
            <li>关闭其他正在使用摄像头的程序</li>
        </ul>
        <div class="permission-buttons">
            <button id="retryBtn">重试</button>
            <button id="closeHelpBtn">关闭</button>
        </div>
    </div>

    <!-- 引入Electron预加载脚本 -->
    <script src="../../preload.js"></script>
    <!-- 引入应用脚本 -->
    <script src="../modules/status.js"></script>
    <script src="../modules/camera.js"></script>
    <script src="../modules/resolution.js"></script>
    <script src="../modules/ui.js"></script>
    <script src="../main.js"></script>
</body>
</html>